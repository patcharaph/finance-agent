# ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Finance Agent Tools

## üéØ ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏°‡∏≤‡πÉ‡∏ä‡πâ

### 1. ‚úÖ ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏´‡∏∏‡πâ‡∏ô‡πÑ‡∏ó‡∏¢ (.BK)
- **‡∏Å‡πà‡∏≠‡∏ô**: ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- **‡∏´‡∏•‡∏±‡∏á**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô docstring ‡πÅ‡∏•‡∏∞ comments
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `PTT.BK`, `KBANK.BK`, `SCB.BK`, `CPALL.BK`

### 2. ‚úÖ US Stocks ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ï‡∏£‡∏á ‡πÜ
- **‡∏Å‡πà‡∏≠‡∏ô**: ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- **‡∏´‡∏•‡∏±‡∏á**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô docstring
- **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**: `AAPL`, `MSFT`, `TSLA`, `GOOGL`

### 3. ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏î‡πâ‡∏ß‡∏¢ period="5d" + tail(1)
- **‡∏Å‡πà‡∏≠‡∏ô**: ‡πÉ‡∏ä‡πâ period="1d" ‡∏≠‡∏≤‡∏à‡πÑ‡∏î‡πâ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î
- **‡∏´‡∏•‡∏±‡∏á**: ‡πÉ‡∏ä‡πâ period="5d" ‡πÅ‡∏•‡πâ‡∏ß tail(1) ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå**: ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

### 4. ‚úÖ Error Logging ‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
- **‡∏Å‡πà‡∏≠‡∏ô**: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
- **‡∏´‡∏•‡∏±‡∏á**: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:
  - Error Type
  - Error Message
  - Rate limit detection (429)
  - Network timeout detection
  - Connection error detection
  - Access forbidden detection (403)

### 5. ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Proxy
- **‡∏Å‡πà‡∏≠‡∏ô**: ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö proxy
- **‡∏´‡∏•‡∏±‡∏á**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö proxy configuration
- **‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå**:
  - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ proxy ‡∏ï‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á DataLoader
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô proxy ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á
  - ‡∏•‡∏ö proxy configuration

## üîß ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÇ‡∏Ñ‡πâ‡∏î

### DataLoader Class
```python
# ‡πÄ‡∏û‡∏¥‡πà‡∏° proxy support
def __init__(self, proxy_config: Optional[Dict[str, str]] = None):
    self.proxy_config = proxy_config or {}

# ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ proxy
def set_proxy(self, proxy_config: Dict[str, str]):
def clear_proxy(self):

# ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á error handling
def fetch_price_data(self, symbol: str, period: str = "2y", interval: str = "1d"):
    # Enhanced error logging
    # Rate limit detection
    # Network timeout handling
    # Mock data fallback
```

### Mock Data Fallback
```python
def generate_mock_data(self, symbol: str, period: str = "2y", interval: str = "1d"):
    # ‡∏™‡∏£‡πâ‡∏≤‡∏á mock data ‡πÄ‡∏°‡∏∑‡πà‡∏≠ API ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
    # ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏±‡∏ô
    # ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á
```

## üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Mock Data
```
‚úÖ PTT.BK: ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 181 ‡πÅ‡∏ñ‡∏ß (Mock Data: True)
‚úÖ KBANK.BK: ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 181 ‡πÅ‡∏ñ‡∏ß (Mock Data: True)
‚úÖ SCB.BK: ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 181 ‡πÅ‡∏ñ‡∏ß (Mock Data: True)
```

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Technical Indicators
```
‚úÖ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì indicators ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
   ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô indicators: 14
   RSI(14): 56.53
   SMA(20): 40.19
   EMA(12): 40.81
   MACD: 0.0382
   Bollinger Upper: 41.98
   Bollinger Lower: 38.41
```

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Proxy Support
```
‚úÖ DataLoader ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏û‡∏£‡πâ‡∏≠‡∏° proxy config
‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô proxy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
‚úÖ ‡∏•‡∏ö proxy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
```

## üöÄ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏´‡∏∏‡πâ‡∏ô‡πÑ‡∏ó‡∏¢
```python
from agent.tools import DataLoader

loader = DataLoader()
result = loader.fetch_price_data("PTT.BK", period="1y")
```

### ‡∏´‡∏∏‡πâ‡∏ô‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏±‡∏ô
```python
result = loader.fetch_price_data("AAPL", period="6mo")
```

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
```python
result = loader.fetch_price_data("PTT.BK", period="5d")
# ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ tail(1) ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

### ‡πÉ‡∏ä‡πâ Proxy
```python
proxy_config = {
    "http": "http://proxy.company.com:8080",
    "https": "https://proxy.company.com:8080"
}
loader = DataLoader(proxy_config=proxy_config)
```

## üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

1. **`test_improved_tools.py`** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
2. **`demo_mock_data.py`** - ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á mock data
3. **`USAGE_GUIDE.md`** - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
4. **`IMPROVEMENTS_SUMMARY.md`** - ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ô‡∏µ‡πâ

## üéâ ‡∏™‡∏£‡∏∏‡∏õ

‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Finance Agent Tools ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥:

- ‚úÖ **‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏´‡∏∏‡πâ‡∏ô‡πÑ‡∏ó‡∏¢**: ‡πÉ‡∏ä‡πâ `.BK` suffix
- ‚úÖ **US Stocks**: ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ï‡∏£‡∏á ‡πÜ
- ‚úÖ **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î**: ‡πÉ‡∏ä‡πâ `period="5d"` + `tail(1)`
- ‚úÖ **Error Logging**: ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏° rate-limit detection
- ‚úÖ **Proxy Support**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡πá‡∏ï‡∏ñ‡∏π‡∏Å‡∏Å‡∏£‡∏≠‡∏á
- ‚úÖ **Mock Data**: Fallback ‡πÄ‡∏°‡∏∑‡πà‡∏≠ API ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û!
